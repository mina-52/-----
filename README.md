# 💰 サークル会計管理システム

モダンで使いやすいサークル会計管理Webアプリケーションです。収入・支出の記録、統計表示、グラフ可視化などの機能を提供します。

## ✨ 主な機能

### 📊 収支管理
- **収入・支出の登録**: 1件ずつ、またはまとめて複数件を登録可能
- **レコードの編集・削除**: 登録したデータの修正や削除が簡単にできます
- **検索・フィルタ機能**: メモや金額での検索、カテゴリ・日付範囲でのフィルタリング

### 📈 統計・可視化
- **リアルタイム統計**: 収入合計、支出合計、差引残高、会費残高を自動計算
- **グラフ表示**: Chart.jsを使用した月次収支推移グラフ
- **視覚的なダッシュボード**: カラフルな統計カードで一目で状況を把握

### ⚙️ その他の機能
- **初期会費設定**: サークルの初期会費を設定・変更可能
- **CSVエクスポート**: データをCSV形式でダウンロードしてバックアップや分析に活用
- **レスポンシブデザイン**: PC・タブレット・スマートフォンで快適に使用可能

## 🛠️ 技術スタック

- **バックエンド**: Python 3.x, Flask 3.0.0
- **フロントエンド**: Bootstrap 5.3.0, Chart.js 4.4.0
- **データベース**: SQLite3
- **アイコン**: Bootstrap Icons

## 📋 必要な環境

- Python 3.7以上
- pip（Pythonパッケージマネージャー）

## 🚀 セットアップ手順

### 1. リポジトリのクローンまたはダウンロード

```bash
# プロジェクトディレクトリに移動
cd "C:\Users\yuyan\OneDrive\デスクトップ\中村颯太"
```

### 2. 仮想環境の作成

```bash
python -m venv venv
```

### 3. 仮想環境の有効化

**Windows (PowerShell):**
```powershell
.\venv\Scripts\Activate.ps1
```

**Windows (コマンドプロンプト):**
```cmd
venv\Scripts\activate.bat
```

**macOS/Linux:**
```bash
source venv/bin/activate
```

### 4. 依存パッケージのインストール

```bash
pip install -r requirements.txt
```

または、仮想環境のPythonを直接使用する場合：

**Windows:**
```powershell
.\venv\Scripts\python.exe -m pip install -r requirements.txt
```

**macOS/Linux:**
```bash
venv/bin/python -m pip install -r requirements.txt
```

### 5. アプリケーションの起動

```bash
python app.py
```

または、仮想環境のPythonを直接使用：

**Windows:**
```powershell
.\venv\Scripts\python.exe app.py
```

**macOS/Linux:**
```bash
venv/bin/python app.py
```

### 6. ブラウザでアクセス

アプリケーションが起動したら、ブラウザで以下のURLにアクセスしてください：

```
http://localhost:5000
```

## 📁 プロジェクト構成

```
中村颯太/
├── app.py                 # メインアプリケーションファイル
├── requirements.txt       # 依存パッケージ一覧
├── account.db            # SQLiteデータベース（自動生成）
├── README.md             # このファイル
├── venv/                 # 仮想環境（.gitignoreに追加推奨）
└── templates/            # HTMLテンプレート
    ├── index.html        # メインページ（収支一覧・統計）
    ├── add.html          # 収支登録ページ
    ├── edit.html         # 収支編集ページ
    └── set_fee.html      # 会費設定ページ
```

## 🎯 使い方

### 収支の登録

1. トップページの「収支登録」ボタンをクリック
2. **1件ずつ登録**: 単一のレコードを登録
3. **まとめて登録**: 複数のレコードを一度に登録（「行を追加」ボタンで行を追加可能）

### 収支の編集・削除

- **編集**: 一覧表の各レコードの「編集」ボタンをクリック
- **削除**: 各レコードの「削除」ボタンをクリック（確認ダイアログが表示されます）

### 検索・フィルタ

トップページの検索・フィルタセクションで：
- **検索**: メモや金額で検索
- **カテゴリフィルタ**: 収入/支出で絞り込み
- **日付範囲**: 開始日と終了日を指定してフィルタ

### 会費設定

1. 「会費設定」ボタンをクリック
2. 新しい初期会費を入力
3. 「更新する」ボタンをクリック

### CSVエクスポート

1. トップページの「CSV出力」ボタンをクリック
2. `account_records.csv`ファイルがダウンロードされます

## 🔧 データベース

アプリケーションはSQLiteデータベース（`account.db`）を使用します。初回起動時に自動的に作成されます。

### テーブル構造

**records テーブル:**
- `id`: レコードID（主キー）
- `date`: 日付
- `category`: 区分（収入/支出）
- `amount`: 金額
- `memo`: メモ

**settings テーブル:**
- `id`: 設定ID（常に1）
- `initial_fee`: 初期会費

## 🐛 トラブルシューティング

### 仮想環境が有効化できない（Windows PowerShell）

PowerShellの実行ポリシーが原因の場合：

```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### ポート5000が既に使用されている

`app.py`の最後の行を編集して、別のポートを指定：

```python
app.run(debug=True, port=5001)  # ポート番号を変更
```

### データベースエラー

`account.db`ファイルを削除して再起動すると、データベースが再作成されます（**既存データは失われます**）。

## 📝 ライセンス

このプロジェクトは個人利用・学習目的で作成されています。

## 👤 作成者

中村颯太

## 🔄 更新履歴

- **v1.0.0** (2024): 初回リリース
  - 基本的な収支管理機能
  - モダンなUIデザイン
  - グラフ可視化機能
  - 検索・フィルタ機能
  - CSVエクスポート機能

---

**注意**: 本アプリケーションは開発モード（`debug=True`）で動作しています。本番環境で使用する場合は、適切なセキュリティ設定を行ってください。

